(this["webpackJsonpfflogs-app"]=this["webpackJsonpfflogs-app"]||[]).push([[0],[,,,function(e,t,a){e.exports=a(10)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(2),o=a.n(l);a(8),a(9);class s extends n.a.Component{constructor(e){super(e),this.handleReportChange=e=>{this.setState({report:e.target.value})},this.handleFightChange=e=>{this.setState({fight:e.target.value})},this.handleSubmit=e=>{const t=new URL(this.state.report).pathname.trimEnd("/").split("/")[2];this.setState({requestError:!1,loading:!0,errorMessage:"",info:{}}),fetch(`https://www.fflogs.com/v1/report/fights/${t}?api_key=7ffe75b93491065c218baa9ece0d641d`).then(e=>e.json()).then(e=>{this.setInfo(e,t)},e=>{this.setState({loading:!1,requestError:!0})}),e.preventDefault()},this.state={fight:"Futures Rewritten",report:"",errorMessage:"",info:{},requestError:!1,loading:!1}}setInfo(e,t){if(e.error)return void this.setState({errorMessage:e.error});if(console.log(e),"all"===this.state.fight)return e.fights;const a=e.fights.filter(e=>e.name===this.state.fight),r=this.getPullLengths(a);this.setState({loading:!1,info:{report:"https://www.fflogs.com/reports/"+t,totalPulls:r.length,totalTime:this.formatTime(this.getTotalTime(r)),longestPull:this.formatTime(Math.max(...r)),medianPull:this.formatTime(this.getMedianPull(r))}})}getTotalTime(e){return e.reduce((function(e,t){return e+t}),0)}getMedianPull(e){const t=e.sort((function(e,t){return e-t}));if(console.log(t),t.length%2){return t[Math.floor(t.length/2)]}const a=t.length/2;return(t[a-1]+t[a])/2}getPullLengths(e){return e.map(e=>(e.end_time-e.start_time)/1e3)}formatTime(e){var t=e/60;const a=Math.floor(t/60),r=Math.round(e%60);return t=Math.floor(t%60),a>0?`${a}:${t}:${r}`:`${t}:${r}`}render(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("h1",null,"FFLogs Analyzer"),n.a.createElement("p",null,"Get stats on your report!"),this.state.requestError&&n.a.createElement("p",{className:"error"},"Something went wrong!"),this.state.errorMessage&&n.a.createElement("p",{className:"error"},this.state.errorMessage),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("p",null,n.a.createElement("label",null,"Report:",n.a.createElement("input",{type:"text",value:this.state.report,onChange:this.handleReportChange}))),n.a.createElement("p",null,n.a.createElement("label",null,"Fight:",n.a.createElement("select",{value:this.state.fight,onChange:this.handleFightChange},n.a.createElement("option",{value:"all"},"All"),n.a.createElement("option",{value:"The Ultima Weapon"},"Ultima Weapon (Ultimate)"),n.a.createElement("option",{value:"Bahamut Prime"},"Unending Coil of Bahamut (Ultimate)"),n.a.createElement("option",{value:"The Epic of Alexander"},"The Epic of Alexander (Ultimate)"),n.a.createElement("option",{value:"Dragonsong's Reprise"},"Dragonsong's Reprise (Ultimate)"),n.a.createElement("option",{value:"Futures Rewritten"},"Future's Rewritten (Ultimate)")))),n.a.createElement("input",{type:"submit",value:"Submit"})),this.state.info.totalPulls&&n.a.createElement("div",null,n.a.createElement("h3",null,"Stats"),n.a.createElement("p",null,n.a.createElement("a",{className:"error",href:this.state.report,target:"_blank"},"view report")),n.a.createElement("p",null,"total pulls: ",this.state.info.totalPulls),n.a.createElement("p",null,"total time: ",this.state.info.totalTime),n.a.createElement("p",null,"longest pull: ",this.state.info.longestPull),n.a.createElement("p",null,"median pull: ",this.state.info.medianPull))))}}var i=s;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(i,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}],[[3,1,2]]]);
//# sourceMappingURL=main.9b3b2d9b.chunk.js.map